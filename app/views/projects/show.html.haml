%div{ 'data-path' => '', 'data-id' => @project.id.to_s, 'data-model' => @project.class.table_name.singularize}
  %h2
    Project:
    %div.inline{ 'data-model-field' => 'title', 'data-field-type' => 'input'}
      = @project.title
  %div
    %div.flex.six
      %div
        %b
          Customer:
        %br
        = Customer.find_by_id(@project.customer_id).to_s
      %div
        %b
          Priority:
        %br
        = @project.priority.text
      %div
        %b
          Status:
        %br

        = @project.status
        = collection_select :project, :status_id, Status.all, :id, :text.to_s
      %div
        %b
          Project Type:
        %br
        = @project.project_type
      %div
        %b
          Soft Deadline:
        %br
        = @project.soft_deadline
      %div
        %b
          Start Date:
        %br
        = @project.started
    %div
      %b
        Goal:
      = @project.goal
    %hr
    %div.flex.three
      %div
        %b
          Pisces Notes:
        %div.indent{ 'data-model-field' => 'notes', 'data-field-type' => 'textarea'}
          = format_text_field @project.notes
      %div
        %b
          Customer Notes:
        %div.indent{ 'data-model-field' => 'customer_notes', 'data-field-type' => 'textarea'}  
          = format_text_field @project.customer_notes
      %div
        %b
          Potential Stumbling Blocks:
        %div.indent{ 'data-model-field' => 'stumbling_blocks', 'data-field-type' => 'textarea'}
          = format_text_field @project.stumbling_blocks
    %hr
    %div.flex.two
      %div
        %b
          Result Links
        %div#results_links
          %div.flex.two.list
            %div
              Link
            %div.indent{ 'data-model-field' => 'results_notes', 'data-field-type' => 'textarea'}
              Notes
          - @project.results_links.each do |link|
            = render :partial => '/project_links/show_single', :object => link
        %br
        New link
        = render :partial => "/project_links/new_link", locals: {:project => @project, is_result: true}
      %div
        %div
          %b
            Result notes
          %div.indent
            = format_text_field @project.results_notes
        %div
          %b
            CD Batches
          %div.indent#cd_batches
            - @project.cdb_batch_projects.each do |cd_batch|
              %div
                %div
                  = link_to cd_batch.cdb_batch_id, cdb_batch_path(cd_batch.cdb_batch_id)
                  = link_to 'X', cdb_batch_project_path(cd_batch.id, format: :ajax), method: :delete, data: { confirm: 'Are you certain you want to remove this CD Batch from the project?' }, remote: true, class: 'remove_button right'
          %div
            = form_for CdbBatchProject.new, url: {controller: 'cdb_batch_projects', action: 'create', format: :ajax}, remote: true, html: {'data-update-target' => 'cd_batches'}, method: 'POST' do |f|
              = f.hidden_field :project_id, value: @project.id
              = f.text_field :cdb_batch_id
              = f.submit 'Add Cd Batches'
    %hr
    %div.flex.two
      %div
        %b
          Links
        %div#links
          %div.flex.two.list
            %div
              Link
            %div
              Notes
          - @project.links.each do |link|
            = render :partial => '/project_links/show_single', :object => link
        %br
        New link
        = render :partial => "/project_links/new_link", locals: {:project => @project}
      %div
        %b
          Steps
        %div#steps
          %div.flex.four.list
            %div
              Action
            %div
              Status
            %div
              Notes
            %div
              Due
          - @project.steps.each do |step|
            = render :partial => '/steps/show_single', :object => step
        %br
          New step
          = render :partial => '/steps/new_step', locals: {:project => @project}
    %hr
    %div.flex.two
      %div
        %b
          Communications      
        %div#communications_table
          %div.flex.five.label_br
            %div
              Summary
            %div
              Contact
            %div
              Type
            %div
              Status
            %div
              Date
          - @project.communications.each do |communication|
            = render :partial => 'communications/show_single', :object => communication
        %br
          New Communication
          = render :partial => 'communications/new_communication', locals: {:project => @project}  
      %div
        %b
          Contacts      
        %div#contacts_table
          %div.flex.four.list
            %div
              Name
            %div
              Phone Number
            %div
              Email Address
            %div
              Physical Address
          - @project.contacts.each do |contact|
            = render :partial => 'contacts/show_single', :object => contact
        %br
          New Contact
          = render :partial => 'contacts/new_contact', locals: {:project => @project}          
    = link_to "Edit", edit_project_path(@project)
    \|
    = link_to "Destroy", project_path, :method => :delete, :data => {:confirm => 'Are you sure?' }
    \|
    = link_to "Projects Index", projects_path
